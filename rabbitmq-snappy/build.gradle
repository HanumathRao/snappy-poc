configurations {
    provided
    compile.extendsFrom provided
}

apply plugin: 'java'
apply plugin: 'maven'
apply plugin: 'scala'
apply plugin: 'maven'
apply plugin: 'idea'
apply plugin: 'eclipse'

dependencies {
    // provided 'com.stratio.receiver:spark-rabbitmq_1.5:0.2.0'
    provided 'com.rabbitmq:amqp-client:3.5.7'
    compile project(':')
}

task publishRabbitMQMsgs(type: JavaExec, dependsOn: classes) {
    main = 'io.snappydata.adanalytics.aggregator.RabbitMQPublisher'
    classpath sourceSets.main.runtimeClasspath
    classpath configurations.runtime
}

task receiveRabbitMQMsgs(type: JavaExec, dependsOn: classes) {
    main = 'io.snappydata.adanalytics.aggregator.RabbitMQSnappyStream'
    classpath sourceSets.main.runtimeClasspath
    classpath configurations.runtime
    jvmArgs = ['-XX:MaxPermSize=512m'] // for snappy
}
